<head>
    <meta charset="UTF-8">
    <title>Auction</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/auction.css">
    <script>
        function redirectToLogin() {
            alert("Login is necessary for bidding in the auction.");
            window.location.href = "/authUser/login";
        }
    </script>
    <header class="header-container">
        <div class="container">
          <img src="../img/logo1.jpg" alt="Logo" class="logo">
          <h1>Agricultural Auction System</h1>
          <nav class="nav">
            <ul class="header-nav">
              <li><a href="/">Home</a></li>
              <li><a href="/auction">Auctions</a></li>
              <li><a href="/authUser/login" class="login-link">Login</a></li>
            </ul>
          </nav>
        </div>
    </header>
</head>
<body>
    <main>
        <div class="app">
            <h1>Current Auctions</h1>
            <p>Browse and participate in live auctions.</p>

            <% if (error) { %>
                <p class="error-message"><%= error %></p>
            <% } %>

            <% if (products.length > 0) { %>
                <div class="auction-container">
                    <% products.forEach(product => { %>
                        <div class="auction-card">
                            <img src="<%= product.image_url ? '/img2/' + product.image_url : '/img/default-image.jpg' %>" 
                            alt="<%= product.product_name %>" class="product-image">
                                                   <h3><%= product.product_name %></h3>
                            <p><%= product.description %></p>
                            <p><strong>Starting Price:</strong> $<%= product.starting_price %></p>
                            <p><strong>Current Highest Bid:</strong> $<%= product.highest_bid || product.starting_price %></p>
                            <p><strong>Seller:</strong> <%= product.seller_name %></p>
                            <button class="btn-participate" onclick="redirectToLogin()">Participate</button>
                        </div>
                    <% }) %>
                </div>
            <% } else { %>
                <p class="no-products">No products available for auction.</p>
            <% } %>
        </div>
    </main>
    <div id="footer"></div>
    <script src="js/scripts.js"></script>
</body>
</html>
